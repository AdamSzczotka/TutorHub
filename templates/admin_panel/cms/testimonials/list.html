{% extends "layouts/admin.html" %}

{% block title %}{{ title }} - Na Piątkę{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Header -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div>
            <div class="text-sm breadcrumbs">
                <ul>
                    <li><a href="{% url 'landing:cms-dashboard' %}">CMS</a></li>
                    <li>{{ title }}</li>
                </ul>
            </div>
            <h1 class="text-3xl font-bold">{{ title }}</h1>
            <p class="text-base-content/70">Moderuj opinie uczniów i rodziców</p>
        </div>
        <div>
            <a href="{% url 'landing:cms-testimonial-create' %}" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                Dodaj opinię
            </a>
        </div>
    </div>

    <!-- Tabs -->
    <div class="tabs tabs-boxed">
        <a href="{% url 'landing:cms-testimonial-list' %}"
           class="tab {% if current_status == 'all' %}tab-active{% endif %}"
           hx-get="{% url 'landing:cms-testimonial-list' %}"
           hx-target="#testimonials-list"
           hx-push-url="true">
            Wszystkie
        </a>
        <a href="{% url 'landing:cms-testimonial-list' %}?status=pending"
           class="tab {% if current_status == 'pending' %}tab-active{% endif %}"
           hx-get="{% url 'landing:cms-testimonial-list' %}?status=pending"
           hx-target="#testimonials-list"
           hx-push-url="true">
            Oczekujące
            {% if pending_count > 0 %}
            <span class="badge badge-warning ml-2">{{ pending_count }}</span>
            {% endif %}
        </a>
        <a href="{% url 'landing:cms-testimonial-list' %}?status=published"
           class="tab {% if current_status == 'published' %}tab-active{% endif %}"
           hx-get="{% url 'landing:cms-testimonial-list' %}?status=published"
           hx-target="#testimonials-list"
           hx-push-url="true">
            Opublikowane
            <span class="badge badge-success ml-2">{{ published_count }}</span>
        </a>
    </div>

    <!-- Testimonials List -->
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <div id="testimonials-list">
                {% include "admin_panel/cms/testimonials/partials/_list.html" %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
