<form hx-post="{% url 'messages:send' conversation.id %}"
      hx-target="#message-thread"
      hx-swap="beforeend"
      hx-on::after-request="this.reset()"
      enctype="multipart/form-data"
      class="space-y-3">
    {% csrf_token %}

    <div class="form-control">
        {{ form.content }}
        {% if form.content.errors %}
        <label class="label">
            <span class="label-text-alt text-error">{{ form.content.errors.0 }}</span>
        </label>
        {% endif %}
    </div>

    {{ form.content_type }}
    {{ form.reply_to }}

    {% if form.attachments.errors %}
    <div class="alert alert-error">
        <span>{{ form.attachments.errors.0 }}</span>
    </div>
    {% endif %}

    <div class="flex items-center justify-between">
        <div>
            <input type="file"
                   name="attachments"
                   id="file-upload"
                   multiple
                   accept="image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar"
                   class="hidden">
            <label for="file-upload" class="btn btn-outline btn-sm">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
                </svg>
                Załącz
            </label>
        </div>

        <button type="submit" class="btn btn-primary">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
            </svg>
            Wyślij
        </button>
    </div>
</form>
